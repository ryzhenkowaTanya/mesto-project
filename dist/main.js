(()=>{"use strict";var t=document.querySelector(".popup__input_type_name"),e=document.querySelector(".popup__input_type_job"),o=document.querySelector(".profile__name"),n=document.querySelector(".profile__job"),r=document.querySelector(".popup_type_edit"),u=document.querySelector(".popup__image"),a=document.querySelector(".popup__caption"),i=document.querySelector(".popup_type_image"),c=document.querySelector(".profile__button-add"),l=document.querySelectorAll(".popup"),p=document.querySelector(".popup_type_new-card"),d=document.querySelector(".profile__button-edit");function s(t){t.classList.add("popup__opened"),document.addEventListener("keydown",_)}function f(t){t.classList.remove("popup__opened"),document.removeEventListener("keydown",_)}function _(t){"Escape"===t.key&&f(document.querySelector(".popup__opened"))}c.addEventListener("click",(function(){return s(p)})),l.forEach((function(t){t.addEventListener("click",(function(e){e.target.classList.contains("popup__opened")&&f(t),e.target.classList.contains("popup__close")&&f(t)}))}));var m=document.querySelector(".popup__form"),v=document.querySelector(".popup__form_type_card"),b=document.querySelector("#card-template").content.querySelector(".card"),y=document.querySelector(".popup__input_type_name-card"),x=document.querySelector(".popup__input_type_link"),S=document.querySelector(".cards__list");function q(t){t.target.classList.toggle("like-active")}function w(t){t.target.closest(".card").remove()}function k(t){var e=function(t){var e=b.cloneNode(!0);e.querySelector(".card__title").textContent=t.name;var o=e.querySelector(".card__image"),n=e.querySelector(".card__button-like"),r=e.querySelector(".card__button-delete");return o.setAttribute("src",t.link),n.addEventListener("click",q),r.addEventListener("click",w),o.alt=t.name,o.addEventListener("click",(function(){!function(t){u.src=t.link,u.alt=t.name,a.textContent=t.name,s(i)}(t)})),e}(t);S.prepend(e)}function B(t){var e=document.querySelector(t.formSelector);e.addEventListener("submit",(function(e){return function(t,e){t.preventDefault();var o=t.currentTarget;o.checkValidity(),o.querySelector(e.submitButtonSelector).setAttribute("disabled","disabled"),o.reset()}(e,t)})),e.addEventListener("input",(function(e){return function(t,e){var o=t.target,n=t.currentTarget;(function(t,e,o){document.querySelector("#".concat(o.id,"-error")).textContent=o.validationMessage,o.validity.valid?o.classList.remove(e.inputErrorClass):o.classList.add(e.inputErrorClass)})(0,e,o),function(t,e){var o=t.querySelector(e.submitButtonSelector);t.checkValidity()?(o.classList.add(e.validButtonClass),o.classList.remove(e.invalidButtonClass),o.removeAttribute("disabled")):(o.classList.remove(e.validButtonClass),o.classList.add(e.invalidButtonClass),o.setAttribute("disabled","disabled"))}(n,e)}(e,t)}))}[{name:"Pulau Ubin",link:"https://images.unsplash.com/photo-1617015606776-c54fd56b69b8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=668&q=80",alt:""},{name:"Portovenere",link:"https://images.unsplash.com/photo-1617102888614-ae5c7c90d7eb?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:""},{name:"Takayama",link:"https://images.unsplash.com/photo-1616666720355-03ce7f70b237?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:""},{name:"Ortygia",link:"https://images.unsplash.com/photo-1612361814394-35785ba16dc3?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=702&q=80",alt:""},{name:"Novara di Sicilia",link:"https://images.unsplash.com/photo-1612361808300-da9583e1b34e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=671&q=80",alt:""},{name:"GÃ­za",link:"https://images.unsplash.com/photo-1590133324192-1df305deea6b?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1252&q=80",alt:""}].forEach(k),m.addEventListener("submit",(function(u){u.preventDefault(),o.textContent=t.value,n.textContent=e.value,f(r)})),d.addEventListener("click",(function(){t.value=o.textContent,e.value=n.textContent,s(r)})),v.addEventListener("submit",(function(t){t.preventDefault(),k({name:y.value,link:x.value}),v.reset(),f(p)})),B({formSelector:'.popup__form[name="editInfo"]',submitButtonSelector:".popup__button",validButtonClass:"popup_button_valid",invalidButtonClass:"popup_button_invalid",inputErrorClass:"popup__input_type_error"}),B({formSelector:'.popup__form[name="insertInfo"]',submitButtonSelector:".popup__button",validButtonClass:"popup_button_valid",invalidButtonClass:"popup_button_invalid",inputErrorClass:"popup__input_type_error"})})();